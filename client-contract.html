<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Contract</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body{margin:0;background:#020617;color:#f9fafb;font-family:system-ui,sans-serif;}
    header{padding:16px 24px;background:#0f172a;border-bottom:1px solid rgba(148,163,184,0.3);}
    main{padding:24px;max-width:900px;margin:0 auto;}
    .panel{background:#0f172a;border:1px solid rgba(148,163,184,0.3);border-radius:16px;padding:20px;margin-bottom:20px;}
    .pill-btn{border-radius:999px;padding:8px 14px;font-size:13px;cursor:pointer;border:none;background:linear-gradient(120deg,#22c55e,#4ade80);color:#022c22;}
  </style>
</head>
<body>

<header><h2>Contract</h2></header>

<main>
  <div id="contract" class="panel"></div>
  <button id="signBtn" class="pill-btn">Sign Contract</button>
</main>

<script>
function loadContracts(){try{return JSON.parse(localStorage.getItem("timberNovaContracts")||"[]");}catch{return[];}}
function saveContracts(list){localStorage.setItem("timberNovaContracts",JSON.stringify(list));}

const params=new URLSearchParams(location.search);
const id=params.get("id");

const contracts=loadContracts();
const c=contracts.find(x=>x.id===id);

if(!c){document.body.innerHTML="Contract not found.";throw"";}

document.getElementById("contract").innerHTML=`
  <strong>Client:</strong> ${c.clientName}<br>
  <strong>Address:</strong> ${c.jobAddress}<br>
  <strong>Price:</strong> $${c.price}<br><br>
  <strong>Scope:</strong><br>${c.scope}
`;

document.getElementById("signBtn").onclick=()=>{
  c.status="ClientSigned";
  saveContracts(contracts);
  alert("Contract signed.");
};
</script>

</body>
</html>
